<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="533px" preserveAspectRatio="none" style="width:577px;height:533px;" version="1.1" viewBox="0 0 577 533" width="577px" zoomAndPan="magnify"><defs/><g><!--cluster broker.collision--><polygon fill="#FFFFFF" points="177.5,24,293.5,24,300.5,47.6094,374.5,47.6094,374.5,521,177.5,521,177.5,24" style="stroke: #A0A0A0; stroke-width: 1.5;"/><line style="stroke: #A0A0A0; stroke-width: 1.5;" x1="177.5" x2="300.5" y1="47.6094" y2="47.6094"/><text fill="#A0A0A0" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="181.5" y="40.5332">broker.collision</text><!--class Collider--><rect fill="#FFFFFF" height="32" id="Collider" style="stroke: #202020; stroke-width: 1.5;" width="75" x="283" y="473"/><ellipse cx="298" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M301.6875,490.2031 Q301.4375,493.6875 300.2969,494.8438 Q299.2656,495.8594 297.8594,495.8594 Q296.4531,495.8594 295.4219,494.8438 Q293.6719,493.0781 293.6719,489.4063 Q293.6719,485.1563 295.5469,483.25 Q296.5938,482.2344 297.9219,482.2344 Q299.3281,482.2344 300.1719,483.0469 Q301.6563,484.5625 301.5781,487.4375 L299.4531,487.4375 Q299.375,485.1094 298.7344,484.4688 Q298.4531,484.1719 297.9219,484.1719 Q297.4688,484.1719 297.1094,484.5469 Q295.875,485.7656 295.875,489.2813 Q295.875,492.3281 296.9219,493.3438 Q297.3438,493.7813 297.8594,493.7813 Q298.3125,493.7813 298.75,493.3438 Q299.3125,492.7969 299.3906,490.2031 L301.6875,490.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="312" y="493.9102">Collider</text><!--class CollisionDetector--><rect fill="#FFFFFF" height="89.5078" id="CollisionDetector" style="stroke: #202020; stroke-width: 1.5;" width="127" x="204" y="157"/><ellipse cx="219" cy="173" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M222.6875,174.2031 Q222.4375,177.6875 221.2969,178.8438 Q220.2656,179.8594 218.8594,179.8594 Q217.4531,179.8594 216.4219,178.8438 Q214.6719,177.0781 214.6719,173.4063 Q214.6719,169.1563 216.5469,167.25 Q217.5938,166.2344 218.9219,166.2344 Q220.3281,166.2344 221.1719,167.0469 Q222.6563,168.5625 222.5781,171.4375 L220.4531,171.4375 Q220.375,169.1094 219.7344,168.4688 Q219.4531,168.1719 218.9219,168.1719 Q218.4688,168.1719 218.1094,168.5469 Q216.875,169.7656 216.875,173.2813 Q216.875,176.3281 217.9219,177.3438 Q218.3438,177.7813 218.8594,177.7813 Q219.3125,177.7813 219.75,177.3438 Q220.3125,176.7969 220.3906,174.2031 L222.6875,174.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="233" y="177.9102">CollisionDetector</text><line style="stroke: #202020; stroke-width: 1.5;" x1="205" x2="330" y1="189" y2="189"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="90" x="210" y="204.4189">createIntraGroup()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="90" x="210" y="218.2549">createInterGroup()</text><line style="stroke: #202020; stroke-width: 1.0;" x1="205" x2="330" y1="224.6719" y2="224.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="210" y="240.0908">detect(onOverlap)</text><!--class Quadtree--><rect fill="#FFFFFF" height="67.6719" id="Quadtree" style="stroke: #202020; stroke-width: 1.5;" width="133" x="200" y="327"/><ellipse cx="237.5" cy="343" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M241.1875,344.2031 Q240.9375,347.6875 239.7969,348.8438 Q238.7656,349.8594 237.3594,349.8594 Q235.9531,349.8594 234.9219,348.8438 Q233.1719,347.0781 233.1719,343.4063 Q233.1719,339.1563 235.0469,337.25 Q236.0938,336.2344 237.4219,336.2344 Q238.8281,336.2344 239.6719,337.0469 Q241.1563,338.5625 241.0781,341.4375 L238.9531,341.4375 Q238.875,339.1094 238.2344,338.4688 Q237.9531,338.1719 237.4219,338.1719 Q236.9688,338.1719 236.6094,338.5469 Q235.375,339.7656 235.375,343.2813 Q235.375,346.3281 236.4219,347.3438 Q236.8438,347.7813 237.3594,347.7813 Q237.8125,347.7813 238.25,347.3438 Q238.8125,346.7969 238.8906,344.2031 L241.1875,344.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51" x="256.5" y="347.9102">Quadtree</text><line style="stroke: #202020; stroke-width: 1.5;" x1="201" x2="332" y1="359" y2="359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="206" y="374.4189">loadAt(cellIndex, collider)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="206" y="388.2549">reset()</text><!--class Cell--><rect fill="#FFFFFF" height="32" id="Cell" style="stroke: #202020; stroke-width: 1.5;" width="54" x="193.5" y="473"/><ellipse cx="208.5" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M212.1875,490.2031 Q211.9375,493.6875 210.7969,494.8438 Q209.7656,495.8594 208.3594,495.8594 Q206.9531,495.8594 205.9219,494.8438 Q204.1719,493.0781 204.1719,489.4063 Q204.1719,485.1563 206.0469,483.25 Q207.0938,482.2344 208.4219,482.2344 Q209.8281,482.2344 210.6719,483.0469 Q212.1563,484.5625 212.0781,487.4375 L209.9531,487.4375 Q209.875,485.1094 209.2344,484.4688 Q208.9531,484.1719 208.4219,484.1719 Q207.9688,484.1719 207.6094,484.5469 Q206.375,485.7656 206.375,489.2813 Q206.375,492.3281 207.4219,493.3438 Q207.8438,493.7813 208.3594,493.7813 Q208.8125,493.7813 209.25,493.3438 Q209.8125,492.7969 209.8906,490.2031 L212.1875,490.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="22" x="222.5" y="493.9102">Cell</text><!--class CollisionSpace--><rect fill="#FFFFFF" height="32" id="CollisionSpace" style="stroke: #202020; stroke-width: 1.5;" width="115" x="233" y="60"/><ellipse cx="248" cy="76" fill="#E6E6FA" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M249.1719,80.7188 L249.9063,80.7188 L249.9063,82.8594 L246.2188,82.8594 L246.2188,80.7188 L246.9531,80.7188 L246.9531,71.375 L246.2188,71.375 L246.2188,69.2344 L249.9063,69.2344 L249.9063,71.375 L249.1719,71.375 L249.1719,80.7188 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="262" y="80.9102">CollisionSpace</text><!--class YourDetectingProcess--><rect fill="#FFFFFF" height="32" id="YourDetectingProcess" style="stroke: #202020; stroke-width: 1.5;" width="155" x="6" y="185"/><ellipse cx="21" cy="201" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M24.6875,202.2031 Q24.4375,205.6875 23.2969,206.8438 Q22.2656,207.8594 20.8594,207.8594 Q19.4531,207.8594 18.4219,206.8438 Q16.6719,205.0781 16.6719,201.4063 Q16.6719,197.1563 18.5469,195.25 Q19.5938,194.2344 20.9219,194.2344 Q22.3281,194.2344 23.1719,195.0469 Q24.6563,196.5625 24.5781,199.4375 L22.4531,199.4375 Q22.375,197.1094 21.7344,196.4688 Q21.4531,196.1719 20.9219,196.1719 Q20.4688,196.1719 20.1094,196.5469 Q18.875,197.7656 18.875,201.2813 Q18.875,204.3281 19.9219,205.3438 Q20.3438,205.7813 20.8594,205.7813 Q21.3125,205.7813 21.75,205.3438 Q22.3125,204.7969 22.3906,202.2031 L24.6875,202.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123" x="35" y="205.9102">YourDetectingProcess</text><!--class YourSpace--><rect fill="#FFFFFF" height="89.5078" id="YourSpace" style="stroke: #202020; stroke-width: 1.5;" width="175" x="391" y="156"/><ellipse cx="444.25" cy="172" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M447.9375,173.2031 Q447.6875,176.6875 446.5469,177.8438 Q445.5156,178.8594 444.1094,178.8594 Q442.7031,178.8594 441.6719,177.8438 Q439.9219,176.0781 439.9219,172.4063 Q439.9219,168.1563 441.7969,166.25 Q442.8438,165.2344 444.1719,165.2344 Q445.5781,165.2344 446.4219,166.0469 Q447.9063,167.5625 447.8281,170.4375 L445.7031,170.4375 Q445.625,168.1094 444.9844,167.4688 Q444.7031,167.1719 444.1719,167.1719 Q443.7188,167.1719 443.3594,167.5469 Q442.125,168.7656 442.125,172.2813 Q442.125,175.3281 443.1719,176.3438 Q443.5938,176.7813 444.1094,176.7813 Q444.5625,176.7813 445,176.3438 Q445.5625,175.7969 445.6406,173.2031 L447.9375,173.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="464.75" y="176.9102">YourSpace</text><line style="stroke: #202020; stroke-width: 1.5;" x1="392" x2="565" y1="188" y2="188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="64" x="397" y="203.4189">partitionLevel</text><line style="stroke: #202020; stroke-width: 1.5;" x1="392" x2="565" y1="209.8359" y2="209.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="84" x="397" y="225.2549">createQuadtree()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="163" x="397" y="239.0908">getCellIndex(coordinatesofAABB)</text><!--class YourUpdatingProcess--><rect fill="#FFFFFF" height="32" id="YourUpdatingProcess" style="stroke: #202020; stroke-width: 1.5;" width="153" x="391" y="345"/><ellipse cx="406" cy="361" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M409.6875,362.2031 Q409.4375,365.6875 408.2969,366.8438 Q407.2656,367.8594 405.8594,367.8594 Q404.4531,367.8594 403.4219,366.8438 Q401.6719,365.0781 401.6719,361.4063 Q401.6719,357.1563 403.5469,355.25 Q404.5938,354.2344 405.9219,354.2344 Q407.3281,354.2344 408.1719,355.0469 Q409.6563,356.5625 409.5781,359.4375 L407.4531,359.4375 Q407.375,357.1094 406.7344,356.4688 Q406.4531,356.1719 405.9219,356.1719 Q405.4688,356.1719 405.1094,356.5469 Q403.875,357.7656 403.875,361.2813 Q403.875,364.3281 404.9219,365.3438 Q405.3438,365.7813 405.8594,365.7813 Q406.3125,365.7813 406.75,365.3438 Q407.3125,364.7969 407.3906,362.2031 L409.6875,362.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="420" y="365.9102">YourUpdatingProcess</text><!--class YourCollidableObject--><rect fill="#FFFFFF" height="32" id="YourCollidableObject" style="stroke: #202020; stroke-width: 1.5;" width="148" x="393.5" y="473"/><ellipse cx="408.5" cy="489" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M412.1875,490.2031 Q411.9375,493.6875 410.7969,494.8438 Q409.7656,495.8594 408.3594,495.8594 Q406.9531,495.8594 405.9219,494.8438 Q404.1719,493.0781 404.1719,489.4063 Q404.1719,485.1563 406.0469,483.25 Q407.0938,482.2344 408.4219,482.2344 Q409.8281,482.2344 410.6719,483.0469 Q412.1563,484.5625 412.0781,487.4375 L409.9531,487.4375 Q409.875,485.1094 409.2344,484.4688 Q408.9531,484.1719 408.4219,484.1719 Q407.9688,484.1719 407.6094,484.5469 Q406.375,485.7656 406.375,489.2813 Q406.375,492.3281 407.4219,493.3438 Q407.8438,493.7813 408.3594,493.7813 Q408.8125,493.7813 409.25,493.3438 Q409.8125,492.7969 409.8906,490.2031 L412.1875,490.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="422.5" y="493.9102">YourCollidableObject</text><!--reverse link CollisionDetector to Quadtree--><path d="M267.116,262.628 C266.979,284.376 266.829,308.09 266.711,326.67 " fill="none" id="CollisionDetector&lt;-Quadtree" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="267.2,249.405,263.1618,255.3794,267.1235,261.4048,271.1617,255.4304,267.2,249.405" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="242.6543" y="316.1607">1..2</text><!--reverse link Quadtree to Cell--><path d="M249.906,407.454 C241.504,430.466 231.864,456.8724 225.979,472.9929 " fill="none" id="Quadtree&lt;-Cell" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#202020" points="254.414,395.105,248.5988,399.3692,250.2984,406.3772,256.1136,402.113,254.414,395.105" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="219.684" y="461.9981">n</text><!--reverse link Cell to Collider--><path d="M260.935,489 C268.207,489 275.48,489 282.753,489 " fill="none" id="Cell&lt;-Collider" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="247.844,489,253.844,493,259.844,489,253.844,485,247.844,489" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="267.8903" y="485.0036">n</text><!--link CollisionSpace to CollisionDetector--><!--reverse link YourSpace to YourUpdatingProcess--><path d="M475.08,251.123 C472.832,283.41 470.041,323.506 468.552,344.893 " fill="none" id="YourSpace&lt;-YourUpdatingProcess" style="stroke: #202020; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#202020" points="475.436,246.012,470.8207,254.7125,475.0888,250.9999,478.8014,255.268,475.436,246.012" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="473.5" y="293.4951">use</text><!--link YourUpdatingProcess to YourCollidableObject--><path d="M467.5,377.45 C467.5,400.15 467.5,442.5396 467.5,467.7187 " fill="none" id="YourUpdatingProcess-&gt;YourCollidableObject" style="stroke: #202020; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#202020" points="467.5,472.8171,471.5,463.8171,467.5,467.8171,463.5,463.8171,467.5,472.8171" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="468.5" y="439.4951">use</text><!--reverse link CollisionSpace to YourSpace--><path d="M330.347,103.07 C353.8,118.414 384.077,138.223 411.142,155.931 " fill="none" id="CollisionSpace&lt;-YourSpace" style="stroke: #202020; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="326.456,108.89,313.552,92.082,334.121,97.174,326.456,108.89" style="stroke: #202020; stroke-width: 1.0;"/><!--link YourUpdatingProcess to Quadtree--><path d="M390.943,361 C373.696,361 355.449,361 338.401,361 " fill="none" id="YourUpdatingProcess-&gt;Quadtree" style="stroke: #202020; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#202020" points="333.151,361,342.151,365,338.151,361,342.151,357,333.151,361" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="351.5" y="354.4951">use</text><!--reverse link YourCollidableObject to Collider--><path d="M380.01,489 C372.711,489 365.411,489 358.111,489 " fill="none" id="YourCollidableObject&lt;-Collider" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#202020" points="393.15,489,387.15,485,381.15,489,387.15,493,393.15,489" style="stroke: #202020; stroke-width: 1.0;"/><!--link YourDetectingProcess to CollisionDetector--><path d="M120.724,217.004 C143.92,225.823 174.923,235 203.5,235 " fill="none" id="YourDetectingProcess-&gt;CollisionDetector" style="stroke: #202020; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#202020" points="203.5,235,194.5,231,198.5,235,194.5,239,203.5,235" style="stroke: #202020; stroke-width: 1.0;"/><!--
@startuml collision


skinparam shadowing false
skinparam backgroundColor White
skinparam package {
  BorderColor #A0A0A0
  FontColor #A0A0A0
}
skinparam class {
  BackgroundColor White
  ArrowColor #202020
  BorderColor #202020
  FontColor #000000
}
skinparam note {
  BackgroundColor White
  FontColor #606060
  BorderColor #C0C0C0
}
skinparam stereotypeIBackgroundColor Lavender
hide empty members


package broker.collision {
	class Collider
	class CollisionDetector {
    {static} createIntraGroup()
    {static} createInterGroup()
    - - - -
    detect(onOverlap)
  }
	class Quadtree {
    loadAt(cellIndex, collider)
    reset()
  }
	class Cell
  interface CollisionSpace

  CollisionDetector o- - "1..2" Quadtree
  Quadtree *- - "n" Cell
  Cell o-r- "n" Collider

  CollisionSpace -[hidden]- CollisionDetector
}

  class YourDetectingProcess
  class YourSpace {
    {static} partitionLevel
    {static} createQuadtree()
    {static} getCellIndex(coordinatesofAABB)
  }
  Class YourUpdatingProcess
  class YourCollidableObject

  YourSpace <.. YourUpdatingProcess : use
  YourUpdatingProcess ..> YourCollidableObject : use

  CollisionSpace <|.. YourSpace
  Quadtree <.r. YourUpdatingProcess : use
  Collider -r-* YourCollidableObject
  CollisionDetector::detect <.r. YourDetectingProcess

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 GMT+09:00 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_242-b08
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>