<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="326px" preserveAspectRatio="none" style="width:425px;height:326px;" version="1.1" viewBox="0 0 425 326" width="425px" zoomAndPan="magnify"><defs/><g><!--cluster broker.timer--><polygon fill="#FFFFFF" points="22,24,115,24,122,47.6094,403,47.6094,403,314,22,314,22,24" style="stroke: #A0A0A0; stroke-width: 1.5;"/><line style="stroke: #A0A0A0; stroke-width: 1.5;" x1="22" x2="122" y1="47.6094" y2="47.6094"/><text fill="#A0A0A0" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="26" y="40.5332">broker.timer</text><!--class Timer--><rect fill="#FFFFFF" height="109.1797" id="Timer" style="stroke: #202020; stroke-width: 1.5;" width="163" x="38.5" y="189"/><ellipse cx="99.75" cy="205" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M103.4375,206.2031 Q103.1875,209.6875 102.0469,210.8438 Q101.0156,211.8594 99.6094,211.8594 Q98.2031,211.8594 97.1719,210.8438 Q95.4219,209.0781 95.4219,205.4063 Q95.4219,201.1563 97.2969,199.25 Q98.3438,198.2344 99.6719,198.2344 Q101.0781,198.2344 101.9219,199.0469 Q103.4063,200.5625 103.3281,203.4375 L101.2031,203.4375 Q101.125,201.1094 100.4844,200.4688 Q100.2031,200.1719 99.6719,200.1719 Q99.2188,200.1719 98.8594,200.5469 Q97.625,201.7656 97.625,205.2813 Q97.625,208.3281 98.6719,209.3438 Q99.0938,209.7813 99.6094,209.7813 Q100.0625,209.7813 100.5,209.3438 Q101.0625,208.7969 101.1406,206.2031 L103.4375,206.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="32" x="120.25" y="209.9102">Timer</text><line style="stroke: #202020; stroke-width: 1.5;" x1="39.5" x2="200.5" y1="221" y2="221"/><ellipse cx="49.5" cy="232" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="58.5" y="236.4189">setDuration(duration)</text><ellipse cx="49.5" cy="245.8359" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="58.5" y="250.2549">step()</text><polygon fill="#FFFF44" points="49.5,254.6719,53.5,258.6719,49.5,262.6719,45.5,258.6719" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="58.5" y="264.0908">onStart()</text><polygon fill="#FFFF44" points="49.5,268.5078,53.5,272.5078,49.5,276.5078,45.5,272.5078" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="58.5" y="277.9268">onProgress(progress: Float)</text><polygon fill="#FFFF44" points="49.5,282.3438,53.5,286.3438,49.5,290.3438,45.5,286.3438" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="58.5" y="291.7627">onComplete()</text><!--class Timers--><rect fill="#FFFFFF" height="67.6719" id="Timers" style="stroke: #202020; stroke-width: 1.5;" width="71" x="84.5" y="60"/><ellipse cx="99.5" cy="76" fill="#ADD1B2" rx="11" ry="11" style="stroke: #202020; stroke-width: 1.0;"/><path d="M103.1875,77.2031 Q102.9375,80.6875 101.7969,81.8438 Q100.7656,82.8594 99.3594,82.8594 Q97.9531,82.8594 96.9219,81.8438 Q95.1719,80.0781 95.1719,76.4063 Q95.1719,72.1563 97.0469,70.25 Q98.0938,69.2344 99.4219,69.2344 Q100.8281,69.2344 101.6719,70.0469 Q103.1563,71.5625 103.0781,74.4375 L100.9531,74.4375 Q100.875,72.1094 100.2344,71.4688 Q99.9531,71.1719 99.4219,71.1719 Q98.9688,71.1719 98.6094,71.5469 Q97.375,72.7656 97.375,76.2813 Q97.375,79.3281 98.4219,80.3438 Q98.8438,80.7813 99.3594,80.7813 Q99.8125,80.7813 100.25,80.3438 Q100.8125,79.7969 100.8906,77.2031 L103.1875,77.2031 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="39" x="113.5" y="80.9102">Timers</text><line style="stroke: #202020; stroke-width: 1.5;" x1="85.5" x2="154.5" y1="92" y2="92"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="90.5" y="107.4189">push(timer)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="90.5" y="121.2549">step()</text><path d="M190.5,72.5 L190.5,90 L155.561,94 L190.5,98 L190.5,115.2031 A0,0 0 0 0 190.5,115.2031 L355.5,115.2031 A0,0 0 0 0 355.5,115.2031 L355.5,82.5 L345.5,72.5 L190.5,72.5 A0,0 0 0 0 190.5,72.5 " fill="#FFFFFF" style="stroke: #C0C0C0; stroke-width: 1.0;"/><path d="M345.5,72.5 L345.5,82.5 L355.5,82.5 L345.5,72.5 " fill="#FFFFFF" style="stroke: #C0C0C0; stroke-width: 1.0;"/><text fill="#606060" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="196.5" y="90.9951">Steps all timers and</text><text fill="#606060" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="196.5" y="107.3467">removes completed ones</text><!--reverse link Timers to Timer--><path d="M120,141.382 C120,156.485 120,173.373 120,188.957 " fill="none" id="Timers&lt;-Timer" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#202020" points="120,128.102,116,134.102,120,140.102,124,134.102,120,128.102" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="92.2531" y="178.0594">1..n</text><!--link Timer to Timer--><path d="M201.658,227.996 C221.634,229.145 236.5,234.3125 236.5,243.5 C236.5,250.5342 227.786,255.2122 214.736,257.534 " fill="none" id="Timer-&gt;Timer" style="stroke: #202020; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="201.658,259.0039,208.0671,262.309,213.583,257.6641,207.1739,254.359,201.658,259.0039" style="stroke: #202020; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="242.5" y="248.9951">next Timer to run (optional)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="209.6208" y="223.4786">0..1</text><!--
@startuml timer


skinparam shadowing false
skinparam backgroundColor White
skinparam package {
  BorderColor #A0A0A0
  FontColor #A0A0A0
}
skinparam class {
  BackgroundColor White
  ArrowColor #202020
  BorderColor #202020
  FontColor #000000
}
skinparam note {
  BackgroundColor White
  FontColor #606060
  BorderColor #C0C0C0
}
skinparam stereotypeIBackgroundColor Lavender
hide empty members


package broker.timer {
	class Timer {
    +setDuration(duration)
    +step()
    #onStart()
    #onProgress(progress: Float)
    #onComplete()
  }
	class Timers {
    push(timer)
    step()
  }

  Timers *- - "1..n " Timer
  Timer o-l- "0..1" Timer : next Timer to run (optional)

  note right of Timers
  Steps all timers and
  removes completed ones
  end note
}

@enduml

PlantUML version 1.2019.09(Tue Aug 27 01:19:51 GMT+09:00 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_252-b09
Operating System: Windows 10
OS Version: 10.0
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>